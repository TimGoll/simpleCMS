var DISABLE=0,DEFAULT=1,COMPATIBILITY=2,LScache=function(){var a={init:function({compression_type:l}={}){return f=l||DISABLE,window.addEventListener("storage",b,!1),c()},addEventListener:function(l,m){if("changed"==l.toLowerCase())j=m;else if("added"==l.toLowerCase())h=m;else if("removed"==l.toLowerCase())i=m;else if("expired"==l.toLowerCase())k=m;else return!1;return!0},removeEventListener:function(l){if("changed"==l.toLowerCase())j=void 0;else if("added"==l.toLowerCase())h=void 0;else if("removed"==l.toLowerCase())i=void 0;else if("expired"==l.toLowerCase())k=void 0;else return!1;return!0},add:function(l,m,{expiretime:n}={}){if(""==l||l==void 0||m==void 0)return!1;if(void 0!=window.localStorage[l])return!1;try{n==void 0||0==n?window.localStorage[l]=JSON.stringify({obj:m,exp:0}):(window.localStorage[l]=JSON.stringify({obj:m,exp:new Date().getTime()+n}),d(l,new Date().getTime()+n))}catch(o){return console.log("[LScache] update of storage failed."),!1}return!0},update:function(l,m,{expiretime:n}={}){if(window.localStorage[l]==void 0)return!1;n==void 0&&(n=a.get_expiretime(l));try{n==void 0||!1==n?window.localStorage[l]=JSON.stringify({obj:m,exp:0}):(g[l]!=void 0&&(clearTimeout(g[l]),delete g[l]),window.localStorage[l]=JSON.stringify({obj:m,exp:new Date().getTime()+n}),d(l,new Date().getTime()+n))}catch(o){return console.log("[LScache] update of storage failed."),!1}return!0},get:function(l){if(window.localStorage[l]==void 0)return!1;var m=JSON.parse(window.localStorage[l]);return new Date().getTime()>=m.exp&&0!=m.exp?!1:m.obj},convert_to_base64_from_path:function(l,m,n,{expiretime:o}={}){var p=new Date().getTime(),q=new XMLHttpRequest;q.onload=function(){var r=new FileReader;r.onloadend=function(){var s="";f==DISABLE&&(s=r.result),f==DEFAULT&&(s=LZString.compress(r.result)),f==COMPATIBILITY&&(s=LZString.compressToUTF16(r.result)),n(l,s,{expiretime:o})},r.readAsDataURL(q.response)},q.open("GET",m),q.responseType="blob",q.send()},uncompress_image:function(l){var m="";return f==DISABLE&&(m=l),f==DEFAULT&&(m=LZString.decompress(l)),f==COMPATIBILITY&&(m=LZString.decompressToUTF16(l)),m},remove:function(l){return void 0!=window.localStorage[l]&&(void 0!=g[l]&&(clearTimeout(g[l]),delete g[l]),window.localStorage.removeItem(l),!0)},remove_all:function(){return window.localStorage.clear(),!0},get_expiretime:function(l){if(window.localStorage[l]==void 0)return!1;var m=JSON.parse(window.localStorage[l]);return void 0!=m.exp&&0!=m.exp&&m.exp-new Date().getTime()},update_expiretime:function(l,{expiretime:m}={}){if(window.localStorage[l]==void 0)return!1;var n=JSON.parse(window.localStorage[l]);return a.update(l,n.obj,m)},get_size:function(){var l=0,m=a.get_stored_list();for(var n in m)l+=window.localStorage[m[n]].length;return l},get_stored_list:function(){return 0===window.localStorage.length?[]:Object.keys(window.localStorage)}},b=function(l){var m=l.key,n=l.newValue,o=l.oldValue;if(null==n&&null!=o){var p=JSON.parse(o);0==p.exp||new Date().getTime()<p.exp?(i!=void 0&&i({key:m,obj:p.obj}),console.log("[LScache] Object removed: localStorage['"+m+"']")):(k!=void 0&&k({key:m,obj:p.obj}),console.log("[LScache] Object expired: localStorage['"+m+"']"))}null==o&&null!=n&&(h!=void 0&&h({key:m,obj:JSON.parse(n).obj}),console.log("[LScache] Object added: localStorage['"+m+"']")),null!=o&&null!=n&&(j!=void 0&&j({key:m,obj:JSON.parse(o).obj}),console.log("[LScache] Object changed: localStorage['"+m+"']"))},c=function(){var l=a.get_stored_list();if(0==l.length)return!0;for(var m in l)try{var n=JSON.parse(window.localStorage[l[m]]);n.exp!=void 0&&0!=n.exp&&(new Date().getTime()>=n.exp?window.localStorage.removeItem(l[m]):d(l[m],n.exp))}catch(o){console.log("[LScache] JSON parsing of object failed: localStorage['"+l[m]+"']: "+window.localStorage[l[m]])}return!0},d=function(l,m){g[l]=window.setTimeout(function(){j!=void 0&&j({key:l,obj:JSON.parse(window.localStorage[l]).obj}),console.log("[LScache] Data expired: localStorage['"+l+"']"),a.remove(l)},m-new Date().getTime())},f=0,g={},h,i,j,k;return a}();
